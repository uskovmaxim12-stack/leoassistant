<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å üöÄ | Leo Assistant</title>
    
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="../css/core.css">
    <link rel="stylesheet" href="../css/animations.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- –°—Ç–∏–ª–∏ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞ -->
    <style>
        .dashboard-page {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
        }
        
        .welcome-section h1 {
            font-size: 2rem;
            margin-bottom: 5px;
        }
        
        .welcome-section .subtitle {
            color: var(--text-secondary);
        }
        
        .quick-stats {
            display: flex;
            gap: 20px;
        }
        
        .stat-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius);
            border: 1px solid var(--border);
        }
        
        .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .stat-icon.points { background: rgba(245, 158, 11, 0.2); color: #f59e0b; }
        .stat-icon.level { background: rgba(139, 92, 246, 0.2); color: #8b5cf6; }
        .stat-icon.days { background: rgba(16, 185, 129, 0.2); color: #10b981; }
        
        /* –û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç–∫–∞ */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .dashboard-card {
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            border-radius: var(--radius-lg);
            padding: 25px;
            border: 1px solid var(--border);
            transition: all var(--transition);
            height: 100%;
        }
        
        .dashboard-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }
        
        .card-header h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
        }
        
        .card-icon {
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        /* –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä */
        .progress-container {
            margin: 15px 0;
        }
        
        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), #8b5cf6);
            border-radius: 4px;
            transition: width 1s ease;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        /* –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π */
        .task-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            transition: all var(--transition);
        }
        
        .task-item:hover {
            border-color: var(--primary);
            transform: translateX(5px);
        }
        
        .task-subject {
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .subject-math { background: rgba(99, 102, 241, 0.2); color: #6366f1; }
        .subject-russian { background: rgba(59, 130, 246, 0.2); color: #3b82f6; }
        .subject-history { background: rgba(245, 158, 11, 0.2); color: #f59e0b; }
        .subject-science { background: rgba(16, 185, 129, 0.2); color: #10b981; }
        
        /* –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è */
        .quick-actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
        }
        
        .quick-action {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 20px 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all var(--transition);
        }
        
        .quick-action:hover {
            border-color: var(--primary);
            background: rgba(59, 130, 246, 0.1);
            transform: scale(1.05);
        }
        
        .quick-action i {
            font-size: 2rem;
            color: var(--primary);
        }
        
        /* –ì—Ä–∞—Ñ–∏–∫–∏ */
        .chart-placeholder {
            height: 200px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-style: italic;
        }
        
        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification-bell {
            position: relative;
            cursor: pointer;
        }
        
        .notification-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }
        
        /* –ê—á–∏–≤–∫–∏ */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 15px;
        }
        
        .achievement {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            padding: 15px 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius);
            border: 1px solid var(--border);
        }
        
        .achievement i {
            font-size: 1.5rem;
            color: var(--warning);
        }
        
        /* –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .bottom-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .top-bar {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .quick-stats {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .quick-actions-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 480px) {
            .quick-actions-grid {
                grid-template-columns: 1fr;
            }
            
            .achievements-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        .pulse-animation {
            animation: pulse-glow 2s infinite;
        }
        
        /* –°—Ç–∞—Ç—É—Å—ã */
        .status-online {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            color: var(--success);
            font-size: 0.9rem;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <!-- –ü—Ä–µ–ª–æ–∞–¥–µ—Ä -->
    <div class="preloader" id="preloader">
        <div class="neuro-loader">
            <div class="neuron"></div>
            <div class="neuron"></div>
            <div class="neuron"></div>
            <p>–ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∞—à—É –ø–∞–Ω–µ–ª—å... <span id="loadPercent">0%</span></p>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="app-container">
        <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="user-info" id="userInfo">
                    <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                </div>
                <div class="user-status">
                    <div class="status-online">
                        <span class="status-dot"></span>
                        <span>–û–ù–õ–ê–ô–ù</span>
                    </div>
                </div>
            </div>

            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="dashboard.html" class="nav-link active">
                        <i class="fas fa-home"></i>
                        <span>–ì–ª–∞–≤–Ω–∞—è</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="neuro-assistant.html" class="nav-link">
                        <i class="fas fa-brain"></i>
                        <span>NeuroLeo</span>
                        <span class="badge pulse-animation">NEW</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="homework.html" class="nav-link">
                        <i class="fas fa-tasks"></i>
                        <span>–ó–∞–¥–∞–Ω–∏—è</span>
                        <span class="badge" id="hwBadge">2</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="schedule.html" class="nav-link">
                        <i class="fas fa-calendar-alt"></i>
                        <span>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="friends.html" class="nav-link">
                        <i class="fas fa-user-friends"></i>
                        <span>–î—Ä—É–∑—å—è</span>
                        <span class="badge" id="friendsBadge">0</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="profile.html" class="nav-link">
                        <i class="fas fa-user-cog"></i>
                        <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="admin.html" class="nav-link">
                        <i class="fas fa-shield-alt"></i>
                        <span>–ê–¥–º–∏–Ω</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" onclick="logout()" class="nav-link">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>–í—ã–π—Ç–∏</span>
                    </a>
                </li>
            </ul>

            <div class="sidebar-footer">
                <div class="game-stats">
                    <div class="stat-item">
                        <i class="fas fa-rocket"></i>
                        <span id="sidebarPoints">450</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-layer-group"></i>
                        <span>–£—Ä–æ–≤–µ–Ω—å <span id="sidebarLevel">3</span></span>
                    </div>
                </div>
                <div class="motivational-quote" id="motivationalQuote">
                    <!-- –¶–∏—Ç–∞—Ç–∞ –¥–Ω—è -->
                </div>
            </div>
        </nav>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
        <main class="main-content">
            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–∞—à–±–æ—Ä–¥–∞ -->
            <div class="page active dashboard-page" id="dashboard-page">
                <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
                <div class="top-bar">
                    <div class="welcome-section">
                        <h1 id="welcomeMessage">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h1>
                        <p class="subtitle" id="currentDateTime">
                            <!-- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è -->
                        </p>
                    </div>
                    
                    <div class="quick-stats">
                        <div class="stat-badge">
                            <div class="stat-icon points">
                                <i class="fas fa-rocket"></i>
                            </div>
                            <div>
                                <div class="stat-value" id="pointsValue">450</div>
                                <div class="stat-label">–û—á–∫–∏</div>
                            </div>
                        </div>
                        
                        <div class="stat-badge">
                            <div class="stat-icon level">
                                <i class="fas fa-layer-group"></i>
                            </div>
                            <div>
                                <div class="stat-value" id="levelValue">3</div>
                                <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
                            </div>
                        </div>
                        
                        <div class="stat-badge">
                            <div class="stat-icon days">
                                <i class="fas fa-calendar"></i>
                            </div>
                            <div>
                                <div class="stat-value" id="streakValue">7</div>
                                <div class="stat-label">–î–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç–∫–∞ -->
                <div class="dashboard-grid">
                    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞: NeuroLeo Assistant -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3><i class="fas fa-brain"></i> NeuroLeo Assistant</h3>
                            <div class="card-icon">
                                <i class="fas fa-robot"></i>
                            </div>
                        </div>
                        <p>–í–∞—à —É–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –≤—Å–µ–º –ø—Ä–µ–¥–º–µ—Ç–∞–º. –ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã, –ø–æ–ª—É—á–∞–π—Ç–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è!</p>
                        
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 75%"></div>
                            </div>
                            <div class="progress-text">
                                <span>–û–±—É—á–∏–ª—Å—è –Ω–∞ 75%</span>
                                <span>+5% –∑–∞ –Ω–µ–¥–µ–ª—é</span>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <a href="neuro-assistant.html" class="btn-primary btn-block">
                                <i class="fas fa-comments"></i> –û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç
                            </a>
                        </div>
                    </div>

                    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞: –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3><i class="fas fa-tasks"></i> –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</h3>
                            <span class="badge" id="activeTasksCount">2</span>
                        </div>
                        
                        <div class="task-list" id="activeTasks">
                            <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <a href="homework.html" class="btn-secondary btn-block">
                                <i class="fas fa-external-link-alt"></i> –í—Å–µ –∑–∞–¥–∞–Ω–∏—è
                            </a>
                        </div>
                    </div>

                    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞: –°–µ–≥–æ–¥–Ω—è—à–Ω–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3><i class="fas fa-calendar-day"></i> –°–µ–≥–æ–¥–Ω—è</h3>
                            <span id="todayDate">11 –º–∞—Ä—Ç–∞</span>
                        </div>
                        
                        <div class="task-list" id="todaySchedule">
                            <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <a href="schedule.html" class="btn-secondary btn-block">
                                <i class="fas fa-calendar-alt"></i> –ü–æ–ª–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                            </a>
                        </div>
                    </div>
                </div>

                <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3><i class="fas fa-bolt"></i> –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                    </div>
                    
                    <div class="quick-actions-grid">
                        <div class="quick-action" onclick="quickAction('ask_ai')">
                            <i class="fas fa-robot"></i>
                            <span>–°–ø—Ä–æ—Å–∏—Ç—å AI</span>
                        </div>
                        
                        <div class="quick-action" onclick="quickAction('add_homework')">
                            <i class="fas fa-book-medical"></i>
                            <span>–î–æ–±–∞–≤–∏—Ç—å –î–ó</span>
                        </div>
                        
                        <div class="quick-action" onclick="quickAction('check_schedule')">
                            <i class="fas fa-clock"></i>
                            <span>–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Ä–µ–º—è</span>
                        </div>
                        
                        <div class="quick-action" onclick="quickAction('add_friend')">
                            <i class="fas fa-user-plus"></i>
                            <span>–î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞</span>
                        </div>
                        
                        <div class="quick-action" onclick="quickAction('play_game')">
                            <i class="fas fa-gamepad"></i>
                            <span>–ú–∏–Ω–∏-–∏–≥—Ä–∞</span>
                        </div>
                        
                        <div class="quick-action" onclick="quickAction('settings')">
                            <i class="fas fa-cog"></i>
                            <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                        </div>
                    </div>
                </div>

                <!-- –ù–∏–∂–Ω—è—è —Å–µ–∫—Ü–∏—è -->
                <div class="bottom-section">
                    <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-line"></i> –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è</h3>
                        </div>
                        
                        <div class="chart-placeholder">
                            <div style="text-align: center;">
                                <i class="fas fa-chart-bar" style="font-size: 3rem; margin-bottom: 15px;"></i>
                                <p>–ì—Ä–∞—Ñ–∏–∫ –≤–∞—à–µ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</p>
                                <small>–ù–µ–¥–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</small>
                            </div>
                        </div>
                        
                        <div class="progress-container" style="margin-top: 20px;">
                            <div class="progress-text">
                                <span>–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:</span>
                                <span>65%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 65%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3><i class="fas fa-trophy"></i> –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                        </div>
                        
                        <div class="achievements-grid" id="recentAchievements">
                            <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                        </div>
                        
                        <div style="margin-top: 20px; text-align: center;">
                            <a href="profile.html#achievements" class="btn-secondary">
                                <i class="fas fa-award"></i> –í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                            </a>
                        </div>
                    </div>

                    <!-- –î—Ä—É–∑—å—è –æ–Ω–ª–∞–π–Ω -->
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3><i class="fas fa-user-friends"></i> –î—Ä—É–∑—å—è –æ–Ω–ª–∞–π–Ω</h3>
                            <span class="badge" id="onlineFriendsCount">0</span>
                        </div>
                        
                        <div class="task-list" id="onlineFriends">
                            <div style="text-align: center; padding: 30px; color: var(--text-secondary);">
                                <i class="fas fa-users" style="font-size: 3rem; margin-bottom: 15px;"></i>
                                <p>–ü–æ–∫–∞ –Ω–µ—Ç –¥—Ä—É–∑–µ–π –æ–Ω–ª–∞–π–Ω</p>
                                <small>–î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–∑–µ–π, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –∏—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</small>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <a href="friends.html" class="btn-primary btn-block">
                                <i class="fas fa-user-plus"></i> –ù–∞–π—Ç–∏ –¥—Ä—É–∑–µ–π
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div class="notification-panel" id="notificationPanel" style="display: none;">
        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="../js/config.js"></script>
    <script src="../js/core.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/dashboard.js"></script>
    
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', async () => {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            const user = localStorage.getItem('leo_user') || sessionStorage.getItem('leo_user');
            if (!user) {
                window.location.href = '../index.html';
                return;
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            if (!window.leoApp) {
                window.leoApp = initApp();
                window.leoApp.currentUser = JSON.parse(user);
            }
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–∞
            await initDashboard();
            
            // –°–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–ª–æ–∞–¥–µ—Ä–∞
            setTimeout(() => {
                document.getElementById('preloader').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('preloader').style.display = 'none';
                }, 300);
            }, 800);
        });
        
        async function initDashboard() {
            const user = window.leoApp?.currentUser;
            
            if (!user) return;
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
            document.getElementById('welcomeMessage').textContent = 
                `–ü—Ä–∏–≤–µ—Ç, ${user.name || '–î—Ä—É–≥'}!`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å
            updateSidebar(user);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è
            updateDateTime();
            setInterval(updateDateTime, 60000);
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            await loadDashboardData();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            updateStats();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–¥–∞–Ω–∏—è
            loadActiveTasks();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
            loadTodaySchedule();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
            loadRecentAchievements();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥—Ä—É–∑–µ–π
            loadOnlineFriends();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            checkNotifications();
        }
        
        function updateSidebar(user) {
            const userInfo = document.getElementById('userInfo');
            if (userInfo) {
                userInfo.innerHTML = `
                    <div class="user-avatar" style="background: linear-gradient(135deg, var(--primary), #8b5cf6);">
                        ${user.avatar || user.name.charAt(0)}
                    </div>
                    <div class="user-details">
                        <h3>${user.name}</h3>
                        <div class="user-class">${user.class || '7–ë –ö–õ–ê–°–°'}</div>
                    </div>
                `;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—á–∫–∏ –∏ —É—Ä–æ–≤–µ–Ω—å –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
            document.getElementById('sidebarPoints').textContent = user.points || 450;
            document.getElementById('sidebarLevel').textContent = user.level || 3;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—É—é —Ü–∏—Ç–∞—Ç—É
            updateMotivationalQuote();
        }
        
        function updateDateTime() {
            const now = new Date();
            const dateTimeElement = document.getElementById('currentDateTime');
            const todayDateElement = document.getElementById('todayDate');
            
            if (dateTimeElement) {
                dateTimeElement.textContent = now.toLocaleDateString('ru-RU', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }
            
            if (todayDateElement) {
                todayDateElement.textContent = now.toLocaleDateString('ru-RU', {
                    day: 'numeric',
                    month: 'long'
                });
            }
        }
        
        async function loadDashboardData() {
            // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
            await new Promise(resolve => setTimeout(resolve, 500));
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã fetch –∫ API
            return {
                stats: {
                    points: 450,
                    level: 3,
                    streak: 7,
                    progress: 65
                }
            };
        }
        
        function updateStats() {
            const user = window.leoApp?.currentUser;
            if (!user) return;
            
            document.getElementById('pointsValue').textContent = user.points || 450;
            document.getElementById('levelValue').textContent = user.level || 3;
            document.getElementById('streakValue').textContent = user.streak || 7;
        }
        
        function loadActiveTasks() {
            const tasksContainer = document.getElementById('activeTasks');
            const tasksCount = document.getElementById('activeTasksCount');
            
            const demoTasks = [
                {
                    subject: '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞',
                    title: '–î—Ä–æ–±–∏ –∏ –∏—Ö —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ',
                    dueDate: '15 –º–∞—Ä—Ç–∞',
                    priority: 'high'
                },
                {
                    subject: '–†—É—Å—Å–∫–∏–π —è–∑—ã–∫',
                    title: '–°–ª–æ–∂–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è',
                    dueDate: '18 –º–∞—Ä—Ç–∞',
                    priority: 'medium'
                },
                {
                    subject: '–ò—Å—Ç–æ—Ä–∏—è',
                    title: '–ü–µ—Ç—Ä I –∏ –µ–≥–æ —Ä–µ—Ñ–æ—Ä–º—ã',
                    dueDate: '–í—ã–ø–æ–ª–Ω–µ–Ω–æ',
                    priority: 'low',
                    completed: true
                }
            ];
            
            tasksContainer.innerHTML = '';
            
            demoTasks.forEach(task => {
                const taskElement = document.createElement('div');
                taskElement.className = 'task-item';
                taskElement.innerHTML = `
                    <div style="flex: 1;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                            <span class="task-subject subject-${task.subject.toLowerCase().replace(' ', '-')}">
                                ${task.subject}
                            </span>
                            ${task.completed ? '<span style="color: var(--success); font-size: 0.8rem;"><i class="fas fa-check"></i> –í—ã–ø–æ–ª–Ω–µ–Ω–æ</span>' : ''}
                        </div>
                        <strong>${task.title}</strong>
                        <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 5px;">
                            <i class="fas fa-calendar"></i> ${task.dueDate}
                        </div>
                    </div>
                    ${!task.completed ? `
                    <button class="btn-small" onclick="completeTask('${task.title}')">
                        <i class="fas fa-check"></i>
                    </button>
                    ` : ''}
                `;
                
                tasksContainer.appendChild(taskElement);
            });
            
            const activeTasks = demoTasks.filter(t => !t.completed).length;
            tasksCount.textContent = activeTasks;
            document.getElementById('hwBadge').textContent = activeTasks;
        }
        
        function loadTodaySchedule() {
            const scheduleContainer = document.getElementById('todaySchedule');
            
            const demoSchedule = [
                { time: '13:10-13:50', subject: '–ò—Å—Ç–æ—Ä–∏—è', room: '16 –∫–∞–±' },
                { time: '14:00-14:40', subject: '–†–∞–∑–≥–æ–≤–æ—Ä—ã –æ –≤–∞–∂–Ω–æ–º', room: '21 –∫–∞–±' },
                { time: '14:50-15:30', subject: '–ë–∏–æ–ª–æ–≥–∏—è', room: '21 –∫–∞–±' },
                { time: '15:40-16:20', subject: '–†—É—Å—Å–∫–∏–π —è–∑—ã–∫', room: '32 –∫–∞–±' }
            ];
            
            scheduleContainer.innerHTML = '';
            
            demoSchedule.forEach(lesson => {
                const lessonElement = document.createElement('div');
                lessonElement.className = 'task-item';
                lessonElement.innerHTML = `
                    <div style="flex: 1;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <strong>${lesson.subject}</strong>
                            <span style="color: var(--text-secondary); font-size: 0.9rem;">${lesson.time}</span>
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.9rem;">
                            <i class="fas fa-door-open"></i> ${lesson.room}
                        </div>
                    </div>
                `;
                
                scheduleContainer.appendChild(lessonElement);
            });
        }
        
        function loadRecentAchievements() {
            const achievementsContainer = document.getElementById('recentAchievements');
            
            const demoAchievements = [
                { icon: 'fa-brain', name: 'AI –ú–∞—Å—Ç–µ—Ä', desc: '10 –≤–æ–ø—Ä–æ—Å–æ–≤ –∫ NeuroLeo' },
                { icon: 'fa-rocket', name: '–°—Ç–∞—Ä—Ç–æ–≤—ã–π', desc: '–ü–µ—Ä–≤—ã–µ 100 –æ—á–∫–æ–≤' },
                { icon: 'fa-book', name: '–ö–Ω–∏–∂–Ω—ã–π —á–µ—Ä–≤—å', desc: '5 –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –î–ó' },
                { icon: 'fa-calendar', name: '–°—Ç–∞–±–∏–ª—å–Ω—ã–π', desc: '7 –¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏' },
                { icon: 'fa-users', name: '–°–æ—Ü–∏–∞–ª—å–Ω—ã–π', desc: '–î–æ–±–∞–≤–∏–ª 3 –¥—Ä—É–∑–µ–π' },
                { icon: 'fa-lightbulb', name: '–≠—Ä—É–¥–∏—Ç', desc: '–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã' }
            ];
            
            achievementsContainer.innerHTML = '';
            
            demoAchievements.forEach(achievement => {
                const achievementElement = document.createElement('div');
                achievementElement.className = 'achievement';
                achievementElement.innerHTML = `
                    <i class="fas ${achievement.icon}"></i>
                    <span style="font-size: 0.8rem; text-align: center;">${achievement.name}</span>
                `;
                achievementElement.title = achievement.desc;
                
                achievementsContainer.appendChild(achievementElement);
            });
        }
        
        function loadOnlineFriends() {
            // –í –¥–µ–º–æ –ø–æ–∫–∞ –ø—É—Å—Ç–æ
            const onlineCount = 0;
            document.getElementById('onlineFriendsCount').textContent = onlineCount;
            document.getElementById('friendsBadge').textContent = onlineCount;
        }
        
        function updateMotivationalQuote() {
            const quotes = [
                "–£—á–∏—Å—å —Ç–∞–∫, –∫–∞–∫ –±—É–¥—Ç–æ —Ç–µ–±–µ –Ω—É–∂–Ω–æ —ç—Ç–æ –Ω–∞ –≤—Å—é –∂–∏–∑–Ω—å, –∏ —Ç–∞–∫, –∫–∞–∫ –±—É–¥—Ç–æ —Ç—ã –±–æ–∏—à—å—Å—è –ø–æ—Ç–µ—Ä—è—Ç—å —ç—Ç–æ –∑–∞–≤—Ç—Ä–∞.",
                "–ó–Ω–∞–Ω–∏–µ - —ç—Ç–æ —Å–æ–∫—Ä–æ–≤–∏—â–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–≤—Å—é–¥—É —Å–ª–µ–¥—É–µ—Ç –∑–∞ —Ç–µ–º, –∫—Ç–æ –∏–º –æ–±–ª–∞–¥–∞–µ—Ç.",
                "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ - —ç—Ç–æ —Å–∞–º–æ–µ –º–æ—â–Ω–æ–µ –æ—Ä—É–∂–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –º–∏—Ä.",
                "–ù–µ –±–æ–π—Å—è —Ä–∞—Å—Ç–∏ –º–µ–¥–ª–µ–Ω–Ω–æ, –±–æ–π—Å—è —Ç–æ–ª—å–∫–æ —Å—Ç–æ—è—Ç—å –Ω–∞ –º–µ—Å—Ç–µ.",
                "–£—Å–ø–µ—Ö - —ç—Ç–æ —Å—É–º–º–∞ –Ω–µ–±–æ–ª—å—à–∏—Ö —É—Å–∏–ª–∏–π, –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∏–∑–æ –¥–Ω—è –≤ –¥–µ–Ω—å."
            ];
            
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            const quoteElement = document.getElementById('motivationalQuote');
            
            if (quoteElement) {
                quoteElement.innerHTML = `
                    <i class="fas fa-quote-left" style="color: var(--primary); opacity: 0.5;"></i>
                    <span style="font-size: 0.85rem; font-style: italic;">${randomQuote}</span>
                `;
            }
        }
        
        function checkNotifications() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
            const notifications = JSON.parse(localStorage.getItem('leo_notifications') || '[]');
            const unreadCount = notifications.filter(n => !n.read).length;
            
            if (unreadCount > 0) {
                showNotification(`–£ –≤–∞—Å ${unreadCount} –Ω–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π`, 'info');
            }
        }
        
        function showNotification(message, type = 'info') {
            const panel = document.getElementById('notificationPanel');
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <i class="fas fa-${type === 'info' ? 'info-circle' : 'exclamation-circle'}"></i>
                    <span>${message}</span>
                </div>
                <button class="notification-close" onclick="this.parentNode.remove()">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            panel.appendChild(notification);
            panel.style.display = 'block';
            
            // –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }
        
        function quickAction(action) {
            switch(action) {
                case 'ask_ai':
                    window.location.href = 'neuro-assistant.html';
                    break;
                    
                case 'add_homework':
                    window.location.href = 'homework.html?action=add';
                    break;
                    
                case 'check_schedule':
                    window.location.href = 'schedule.html';
                    break;
                    
                case 'add_friend':
                    window.location.href = 'friends.html?action=add';
                    break;
                    
                case 'play_game':
                    playMiniGame();
                    break;
                    
                case 'settings':
                    window.location.href = 'profile.html#settings';
                    break;
            }
        }
        
        function playMiniGame() {
            // –ü—Ä–æ—Å—Ç–∞—è –º–∏–Ω–∏-–∏–≥—Ä–∞ –¥–ª—è –¥–µ–º–æ
            const score = Math.floor(Math.random() * 100);
            showNotification(`üéÆ –í—ã –Ω–∞–±—Ä–∞–ª–∏ ${score} –æ—á–∫–æ–≤ –≤ –º–∏–Ω–∏-–∏–≥—Ä–µ!`, 'success');
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ—á–∫–∏
            const user = window.leoApp?.currentUser;
            if (user) {
                user.points = (user.points || 0) + score;
                localStorage.setItem('leo_user', JSON.stringify(user));
                updateStats();
            }
        }
        
        function completeTask(taskTitle) {
            if (confirm(`–û—Ç–º–µ—Ç–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ "${taskTitle}" –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ?`)) {
                showNotification(`‚úÖ –ó–∞–¥–∞–Ω–∏–µ "${taskTitle}" –≤—ã–ø–æ–ª–Ω–µ–Ω–æ! +50 –æ—á–∫–æ–≤`, 'success');
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ—á–∫–∏
                const user = window.leoApp?.currentUser;
                if (user) {
                    user.points = (user.points || 0) + 50;
                    localStorage.setItem('leo_user', JSON.stringify(user));
                    updateStats();
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π
                setTimeout(() => {
                    loadActiveTasks();
                }, 500);
            }
        }
        
        function logout() {
            if (window.leoApp?.logout) {
                window.leoApp.logout();
            } else {
                localStorage.removeItem('leo_token');
                localStorage.removeItem('leo_expires');
                sessionStorage.removeItem('leo_user');
                window.location.href = '../index.html';
            }
        }
        
        // –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
        let loadPercent = 0;
        const loadInterval = setInterval(() => {
            loadPercent += 2;
            document.getElementById('loadPercent').textContent = loadPercent + '%';
            
            if (loadPercent >= 100) {
                clearInterval(loadInterval);
            }
        }, 30);
    </script>
</body>
</html>
